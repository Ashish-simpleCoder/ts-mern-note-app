"use strict";(self.webpackChunkts_mern_note_app_frontend=self.webpackChunkts_mern_note_app_frontend||[]).push([[649],{1967:function(n,e,t){var r,o=t(168),i=t(2791),a=t(5751),s=t(184),d=(0,i.memo)((function(n){var e=n.children;return(0,s.jsx)(c,{children:e})}));e.Z=d;var c=a.ZP.section(r||(r=(0,o.Z)(["\n    display:flex;\n    width:100%;\n    flex-direction:column;\n    flex-wrap:wrap;\n    min-height:100vh;\n\n    @media (min-width:700px){\n        max-height:60rem;\n        flex-direction:unset;\n    }\n"])))},6991:function(n,e,t){var r,o,i,a,s,d,c,u,l=t(168),m=t(2791),h=t(5751),f=t(184),p=(0,m.memo)((function(n){var e=n.children,t=n.styles,r=n.page,o=n.mode;return"edit_note"===o?(0,f.jsx)(g,{className:"edit_modal_wrapper",children:e}):"note_output"===r?(0,f.jsx)(x,{style:t,children:e}):(0,f.jsx)(v,{mode:o,style:t,children:e})}));e.Z=p;var v=h.ZP.section(r||(r=(0,l.Z)(["\n    display:flex;\n    overflow:hidden;\n    position:relative;\n\n    ","\n\n    img{\n        display:flex;\n        width:32rem;\n        height:35rem;\n        transform:rotate(-20deg) scale(0.8);\n        transform-origin:center;\n    }\n"])),(function(n){switch(n.mode){case"hero":return(0,h.iv)(o||(o=(0,l.Z)(["\n                width:100%;\n                align-items:center;\n                justify-content:center;\n                transform-origin:center;\n                flex-direction:column;\n                text-align:center;\n\n                @media (min-width:700px){\n                    width:50%;\n                }\n            "])));case"create_note_container":return(0,h.iv)(i||(i=(0,l.Z)(["\n                padding:2rem;\n                justify-content:center;\n                margin-bottom:3rem;\n                button{\n                    width:100%;\n                }\n\n                @media (min-width:700px){\n                    margin-bottom:0rem;\n                        border-right:var(--border);\n                        height:100%;\n                        position:fixed;\n                        width:var(--width);\n                    }\n            "])));case"notes_container_wrapper":return(0,h.iv)(a||(a=(0,l.Z)(["\n                flex-direction:column;\n                @media (min-width:700px){\n                    position:relative;\n                    left:var(--width);\n                    width:calc(100% - var(--width));\n                }\n            "])));case"notes_container":return(0,h.iv)(s||(s=(0,l.Z)(["\n                justify-content:center;\n                gap:3rem;\n                padding:2rem;\n                flex-wrap:wrap;\n                @media (min-width:700px){\n                    justify-content:space-around;\n                }\n            "])));default:return(0,h.iv)(d||(d=(0,l.Z)(["\n            "])))}})),x=h.ZP.section(c||(c=(0,l.Z)(["\n    display:flex;\n    justify-content:center;\n    gap:2rem;\n    flex-wrap:wrap;\n    padding:2rem;\n\n\n    @media (min-width:700px){\n        position:relative;\n        left:var(--width);\n        width:calc(100% - var(--width));\n        justify-content:space-around;\n    }\n"]))),g=h.ZP.section(u||(u=(0,l.Z)(["\n    width:100%;\n    height:100%;\n    top:0 !important;\n    inset:0;\n    position:fixed;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    background:var(--edit-modal-bg);\n    display:none;\n    border-radius:0.5rem;\n"])))},3282:function(n,e,t){var r,o=t(168),i=t(2791),a=t(5751),s=t(184),d=(0,i.memo)((function(n){var e=n.text,t=n.styles;return(0,s.jsx)(c,{style:t,children:e})}));e.Z=d;var c=a.ZP.p(r||(r=(0,o.Z)(["\n    font-size:clamp(1.8rem, 2rem ,2vw);\n    opacity:0.9;\n    /* opacity:0.8; */\n    white-space:pre-line;\n    word-break:break-all;\n    margin-top:1rem;\n    width:max-content;\n"])))},8094:function(n,e,t){var r,o=t(168),i=t(5751),a=t(184);e.Z=function(n){var e=n.error;return(0,a.jsx)(s,{children:e})};var s=i.ZP.p(r||(r=(0,o.Z)(["\n    color:red;\n    font-size:clamp(1.5rem,1.6rem,1.6vw);\n"])))},8956:function(n,e,t){var r,o,i,a=t(168),s=t(2791),d=t(5751),c=t(184),u=(0,s.memo)((function(n){var e=n.children,t=n.no_bg,r=n.mode,o=n.handleSubmit;return(0,c.jsx)(l,{onSubmit:function(n){n.preventDefault(),o&&o(n)},no_bg:t,mode:r,children:e})}));e.Z=u;var l=d.ZP.form(r||(r=(0,a.Z)(["\n    height:45rem;\n    width:90%;\n    display:flex;\n    align-items:center;\n    flex-direction:column;\n    max-width:35rem;\n    background:var(--form-bg);\n\n    ","\n    ","\n    button{\n        margin-top:auto\n    }\n\n    input,textarea{\n        background:var(--input-bg);\n    }\n"])),(function(n){var e=n.mode;if("login"===e||"register"===e)return(0,d.iv)(o||(o=(0,a.Z)(["\n                margin: auto;\n                max-width:40rem;\n                margin-top:5rem;\n                border-radius:0.5rem;\n                box-shadow:0 0.5rem 0.5rem rgba(0,0,0,0.4);\n                padding:0 2rem 2rem 2rem;\n                >h3{\n                    padding:1rem 0 2rem 0;\n                }\n                .div{\n                    padding:0 2rem;\n                    margin-top:2rem;\n                    width:100%;\n                    display:flex;\n                    justify-content:space-between;\n                    align-items:center;\n\n                    input{\n                        background:var(--focused);\n                    }\n                }\n            "])))}),(function(n){if(!0===n.no_bg)return(0,d.iv)(i||(i=(0,a.Z)(["\n            background:inherit;\n        "])))}))},9719:function(n,e,t){var r,o=t(168),i=t(2791),a=t(5751),s=t(184),d=(0,i.memo)((function(n){var e=n.text,t=n.styles,r=n.handleClick;return(0,s.jsx)(c,{style:t,onClick:r,children:e})}));e.Z=d;var c=a.ZP.h3(r||(r=(0,o.Z)(["\n    font-size:2.2rem;\n    font-weight:500;\n"])))},5716:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(5861),o=t(7757),i=t.n(o),a=t(2791),s=t(9271),d=t(5404),c=function(){var n=(0,r.Z)(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("/api/v1/user",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return e=n.sent,n.next=6,e.json();case 6:return t=n.sent,n.abrupt("return",{_id:t._id,email:t.email});case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),u=c,l=function(n){var e=n.auth,t=void 0!==e&&e,o=(0,d.Xh)().setUser,c=(0,s.k6)();(0,a.useLayoutEffect)((function(){(0,r.Z)(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:(null===(e=n.sent)||void 0===e?void 0:e._id)&&o({_id:e._id,email:null===e||void 0===e?void 0:e.email}),t&&(null===e||void 0===e||!e._id)&&c.push("/login");case 5:case"end":return n.stop()}}),n)})))()}),[o])}},5969:function(n,e,t){var r=t(4942),o=t(1413);e.Z=function(){return{handleChange:function(n,e){e((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},n.target.name,n.target.value))}))}}}},2649:function(n,e,t){t.r(e),t.d(e,{EditNoteCtx:function(){return V},default:function(){return $},useEditNoteCtx:function(){return W}});var r,o,i,a,s,d,c,u,l,m=t(8152),h=t(2791),f=t(1967),p=t(6991),v=t(5716),x=function(n){var e=n._id,t=(0,h.useRef)(e);(0,h.useEffect)((function(){t.current=e}),[e]);var r=(0,h.useCallback)((function(n){if(n){var e=document.getElementById("modal"),t=e.parentElement,r=document.getElementById(n).getBoundingClientRect(),o=r.top,i=r.left,a=r.width,s=r.height;e.style.top=o+"px",e.style.left=i+"px",e.style.width=a+"px",e.style.height=s+"px",t.style.display="flex",e.style.display="flex",setTimeout((function(){return document.body.classList.add("edit_mode")}),20)}}),[t]);return(0,h.useEffect)((function(){r(t.current)}),[e]),{enableEditModal:r}},g=t(1413),b=t(5861),w=t(7757),y=t.n(w),Z=t(5404),_=function(){var n=(0,Z.Xh)().setUser;(0,h.useEffect)((function(){(0,b.Z)(y().mark((function e(){var r,o,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve().then(t.bind(t,3109));case 3:return r=e.sent,o=r.default,e.next=7,o("/api/v1/user/notes");case 7:null!==(i=e.sent)&&void 0!==i&&i.notes&&n((function(n){return(0,g.Z)((0,g.Z)({},n),{},{notes:i.notes})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[n])},j=t(168),k=t(5751),C=t(184),E=(0,h.memo)((function(n){var e=n.placeholder,t=n.name,r=n.value,o=n.handleChange,i=n.mode,a=(0,Z.ZP)().setSearch;return(0,C.jsx)(N,{type:"text",name:t,value:r,mode:i,onChange:function(n){"search"===t?a(n.target.value):o&&o(n)},placeholder:e})})),N=k.ZP.input(r||(r=(0,j.Z)(["\n    font-size:clamp(1.6rem,1.7rem,1.7vw);\n    border:none;\n    padding:0.5rem 1rem;\n    background:var(--input-bg);\n    outline:none;\n\n    ","\n    border-radius:0.3rem;\n    outline:var(--border);\n"])),(function(n){switch(n.mode){case"edit_note":return(0,k.iv)(o||(o=(0,j.Z)(["\n                background:inherit;\n                "])));case"note_title":return(0,k.iv)(i||(i=(0,j.Z)(["\n                width:100%;\n                &:hover{  background: var(--input-hover-bg);  }\n                "])));default:return(0,k.iv)(a||(a=(0,j.Z)(["\n            &:hover{  background: var(--input-hover-bg);  }\n\n            "])))}})),P=t(8142),L=t(8094),S=t(8956),z=function(n){var e=n.value,t=n.handleChange,r=n.placeholder,o=n.name,i=n.styles,a=n.hover_bg;return(0,C.jsx)(T,{name:o,value:e,placeholder:r,style:i,hover_bg:a,onChange:function(n){return t&&t(n)}})},T=k.ZP.textarea(s||(s=(0,j.Z)(["\n    width:100%;\n    height:100%;\n    margin-bottom:2rem;\n    resize:none;\n    margin-top:1rem;\n    font-size:clamp(1.6rem,1.7rem,1.7vw);\n    border:none;\n    padding:0.5rem 1rem;\n    background:inherit;\n    outline:var(--border);\n    border-radius:0.3rem;\n    ","\n\n"])),(function(n){if(n.hover_bg)return(0,k.iv)(d||(d=(0,j.Z)(["\n                &:hover{  background: var(--input-hover-bg);  }\n            "])))})),D=t(3109),U=function(){var n=(0,Z.Xh)().setUser,e=(0,h.useState)(!1),r=(0,m.Z)(e,2),o=r[0],i=r[1],a=(0,h.useState)({err:""}),s=(0,m.Z)(a,2),d=s[0],c=s[1],u=(0,h.useState)(!1),l=(0,m.Z)(u,2),f=l[0],p=l[1];(0,h.useEffect)((function(){console.log("note operations")}),[]),(0,h.useEffect)((function(){f&&(0,D.default)("/api/v1/user/notes").then((function(e){null!==e&&void 0!==e&&e.notes&&n((function(n){return(0,g.Z)((0,g.Z)({},n),{},{notes:e.notes})}))}))}),[f]);var v=(0,h.useCallback)(function(){var n=(0,b.Z)(y().mark((function n(e,r){var o,a,s,d,c;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(!0),n.next=3,t.e(385).then(t.bind(t,385));case 3:return o=n.sent,a=o.default,n.next=7,a("/api/v1/user/notes/".concat(e));case 7:null!==(s=n.sent)&&void 0!==s&&s.success&&p(!0),d=document.getElementById("modal"),c=d.parentElement,document.body.classList.remove("edit_mode"),setTimeout((function(){c.style.display="none",d.style.display="none",r&&r({title:"",content:"",_id:"",bg:[]})}),310);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[]),x=(0,h.useCallback)(function(){var n=(0,b.Z)(y().mark((function n(e){var r,o,i,a,s;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=document.getElementById("modal"),o=r.parentElement,document.body.classList.remove("edit_mode"),setTimeout((function(){o.style.display="none",r.style.display="none"}),310),n.next=6,t.e(661).then(t.bind(t,9661));case 6:return i=n.sent,a=i.default,n.next=10,a("/api/v1/user/notes/".concat(e._id),e);case 10:(null===(s=n.sent)||void 0===s?void 0:s.success)&&p(!0);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),w=(0,h.useCallback)(function(){var n=(0,b.Z)(y().mark((function n(e,r,o){var a,s,d;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),i(!0),n.next=4,t.e(279).then(t.bind(t,8279));case 4:return a=n.sent,s=a.default,n.next=8,s(r);case 8:null!==(d=n.sent)&&void 0!==d&&d.error&&c({err:d.error}),null!==d&&void 0!==d&&d.success&&(p(!0),o({title:"",content:""})),i(!1);case 12:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),[]);return{loader:o,setLoader:i,handleDeleteNote:v,handleUpdateNote:x,handleNoteSubmit:w,error:d}},B=t(5969),I=(0,h.memo)((function(){var n=(0,h.useState)({title:"",content:""}),e=(0,m.Z)(n,2),t=e[0],r=e[1],o=U(),i=o.loader,a=o.error,s=o.handleNoteSubmit,d=(0,B.Z)().handleChange,c=(0,h.useCallback)((function(n){d(n,r)}),[]);return(0,C.jsxs)(S.Z,{no_bg:!0,handleSubmit:function(n){return s(n,t,r)},children:[(0,C.jsx)(E,{type:"title",placeholder:"note title...",name:"title",value:t.title,handleChange:c,mode:"note_title"}),(0,C.jsx)(z,{name:"content",value:t.content,handleChange:c,placeholder:"type your notes....",hover_bg:!0}),(0,C.jsx)(P.Z,{text:"create a new note",mode:"create_note_btn",loader:i}),a.err&&(0,C.jsx)(L.Z,{error:a.err})]})})),R=(0,h.memo)((function(n){var e=n.children,t=n.mode,r=W(),o=r.note,i=r.setEditNote,a=(0,h.useContext)(Z.zg).dark_theme,s=U(),d=s.loader,c=s.handleDeleteNote,u=s.handleUpdateNote,l=(0,B.Z)().handleChange,m=(0,h.useCallback)((function(n){l(n,i)}),[]);return"edit_note"===t?(0,C.jsx)(p.Z,{mode:t,children:(0,C.jsxs)(X,{id:"modal",className:"edit_modal",style:{background:a?o.bg[1]:o.bg[0]},children:[(0,C.jsx)(E,{name:"title",value:o.title,handleChange:m,mode:"edit_note"}),(0,C.jsx)(z,{name:"content",value:o.content,handleChange:m}),(0,C.jsxs)("div",{className:"btns",children:[(0,C.jsx)(P.Z,{text:"save",loader:d,handleClick:function(){return u(o)}}),(0,C.jsx)(P.Z,{text:"delete",loader:d,handleClick:function(){return c(o._id)}})]}),e]})}):(0,C.jsx)(C.Fragment,{})})),X=k.ZP.div(c||(c=(0,j.Z)(["\n    height:40rem;\n    width:100%;\n    max-width:60%;\n    border-radius:0.5rem;\n    transition:all 0.3s ease;\n    background:var(--modal-bg);\n    position:fixed;\n    overflow:hidden;\n    box-shadow:0 0.3rem 1rem rgba(0, 0, 0, 0.4);\n    flex-direction:column;\n\n    textarea{\n        flex:1;\n    }\n\n    input,textarea{\n        margin-top:0;\n        border:none !important;\n        outline:none;\n        border-radius:0;\n        font-size:clamp(1.6rem,1.7rem, 1.7vw);\n        /* background:white; */\n        &:focus{\n            background:inherit;\n        }\n    }\n    input{\n        text-align:center ;\n        font-weight:500;\n    }\n\n    .btns{\n        margin-top:auto;\n        display:flex;\n        justify-content:space-between;\n        flex-direction:row;\n        padding:2rem;\n    }\n    .save_btn{\n        background:var(--save-btn-bg);\n    }\n    .delete_btn{\n        background:var(--delete-btn-bg);\n    }\n"]))),M=(0,h.memo)((function(n){var e=n.children;return(0,C.jsx)(F,{children:e})})),F=k.ZP.div(u||(u=(0,j.Z)(["\n    display:flex;\n    align-items:center;\n    justify-content:space-around;\n    padding:1rem;\n    border-bottom:var(--border);\n"]))),G=t(3282),H=t(9719),Y=function(n){var e=n.children;return(0,C.jsx)(p.Z,{styles:{height:"90vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:e})},q=(0,h.memo)((function(n){var e=n.cls,t="#".concat(Math.random().toString(16).slice(2,8));return(0,C.jsx)("span",{className:e,style:{background:t}})})),A=(0,h.memo)((function(n){var e=n.note,t=n.search,r=(0,h.useContext)(V).setEditNote,o=(0,h.useContext)(Z.zg).dark_theme,i=U(),a=i.loader,s=i.handleDeleteNote,d=null===t||void 0===t?void 0:t.trim().toLowerCase(),c=e.title.trim().toLowerCase().includes(d)||e.content.trim().toLowerCase().includes(d),u=function(){return r(e)};return(0,C.jsxs)(J,{id:e._id,style:{background:o?e.bg[1]:e.bg[0],display:c?"block":"none"},className:"note",children:[(0,C.jsxs)(p.Z,{children:[(0,C.jsx)(q,{cls:"random_span"}),(0,C.jsx)(H.Z,{text:e.title,styles:{width:"100%"},handleClick:u})]}),(0,C.jsx)(p.Z,{styles:{overflow:"hidden",height:"60%"},children:(0,C.jsx)("p",{onClick:u,children:e.content})}),(0,C.jsx)(P.Z,{text:"d",mode:"delete_note_btn",handleClick:function(){return s(e._id)},loader:a})]})})),J=k.ZP.div(l||(l=(0,j.Z)(["\n    width:100%;\n    max-width:40rem;\n    height:20rem;\n    border-radius:1rem;\n    box-shadow:0 0.3rem 0.5rem rgba(0,0,0,0.1);\n    position:relative;\n    border:var(--note-border);\n\n    h3,p{\n        font-size:clamp(1.6rem,1.7rem,1.7vw);\n        padding:0.5rem;\n    }\n    h3{\n        border-bottom:var(--border);\n        font-weight:400;\n        text-align:center;\n        width:100%;\n    }\n    p{\n        opacity:0.8;\n        white-space:pre-line;\n        word-break:break-all;\n        /* flex:1; */\n        /* height:100%; */\n        /* border:1px solid; */\n    }\n\n    span.random_span{\n        position:absolute;\n        top:0;left:0;\n        width:5rem;\n        height:5rem;\n        border-radius:50%;\n        transform:translate(-50%, -50%);\n    }\n\n    div.overlay_menu{\n        height:4rem;\n        width:100%;\n        display:flex;\n        opacity:0;\n        pointer-events:none;\n    }\n    &:hover, &:focus, &:focus-within{\n        div.overlay_menu{\n            opacity:1;\n            pointer-events:all;\n        }\n    }\n"]))),K=(0,h.memo)((function(){var n,e,t=(0,Z.ZP)(),r=t.user,o=t.search;return(0,C.jsxs)(p.Z,{mode:"notes_container_wrapper",children:[0!==(null===(n=r.notes)||void 0===n?void 0:n.length)?(0,C.jsxs)(M,{children:[(0,C.jsx)(H.Z,{text:"Your notes"}),(0,C.jsx)(E,{type:"search",name:"search",placeholder:"search your notes..."})]}):(0,C.jsxs)(Y,{children:[(0,C.jsx)(H.Z,{text:"Haven't created any notes?"}),(0,C.jsx)(G.Z,{text:"Then let's get started. "})]}),(0,C.jsx)(p.Z,{mode:"notes_container",children:r.notes&&(null===(e=r.notes)||void 0===e?void 0:e.map((function(n){return(0,C.jsx)(A,{note:n,search:o},n._id)})))})]})})),O=function(n){var e=n.eventType,t=n.handler,r=n.element,o=void 0===r?window:r,i=(0,h.useRef)(t);(0,h.useEffect)((function(){i.current=t}),[t]),(0,h.useEffect)((function(){var n=function(n){n.target.classList.contains("edit_modal_wrapper")&&document.body.classList.contains("edit_mode")&&i.current()};return null===o||void 0===o||o.addEventListener(e,n,!1),function(){null===o||void 0===o||o.removeEventListener(e,n,!1)}}),[e])},Q=function(n){var e=n.eventType,t=n.handler,r=n.element,o=(0,h.useRef)(t);(0,h.useEffect)((function(){o.current=t}),[t]),(0,h.useEffect)((function(){var n=function(n){return"Escape"===n.key&&o.current()};return null===r||void 0===r||r.addEventListener(e,n),function(){null===r||void 0===r||r.removeEventListener(e,n)}}),[e])},V=(0,h.createContext)({}),W=function(){return(0,h.useContext)(V)},$=(0,h.memo)((function(){(0,v.Z)({auth:!0}),_();var n=(0,h.useState)({_id:"",title:"",content:"",bg:[]}),e=(0,m.Z)(n,2),t=e[0],r=e[1];x({_id:t._id});var o=U().handleUpdateNote;Q({eventType:"keyup",handler:function(){return o(t)},element:window}),O({eventType:"click",handler:function(){return o(t)},element:document.body});var i=(0,B.Z)().handleChange,a=(0,h.useCallback)((function(n){i(n,r)}),[]);return(0,C.jsxs)(f.Z,{children:[(0,C.jsx)(p.Z,{mode:"create_note_container",children:(0,C.jsx)(I,{})}),(0,C.jsxs)(V.Provider,{value:{note:t,setEditNote:r,handleNoteChange:a},children:[(0,C.jsx)(K,{}),(0,C.jsx)(R,{mode:"edit_note"})]})]})}))},3109:function(n,e,t){t.r(e);var r=t(5861),o=t(7757),i=t.n(o),a=function(){var n=(0,r.Z)(i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return t=n.sent,n.next=6,t.json();case 6:return r=n.sent,n.abrupt("return",r);case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}();e.default=a}}]);
//# sourceMappingURL=649.6b4e618f.chunk.js.map